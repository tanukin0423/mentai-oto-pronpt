<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¢æ¥ç·´ç¿’ãƒ—ãƒ­ã‚°ãƒ©ãƒ </title>
    <!-- Google Fonts - Noto Sans JP ã‚’èª­ã¿è¾¼ã¿ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', 'Hiragino Sans', 'Meiryo', sans-serif;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 800px;
            max-width: 100%;
            background-color: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative; /* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºç”¨ */
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 30px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 2px solid #5c6bc0;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #2c3e50;
            font-weight: bold;
        }

        select, textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }

        select:focus, textarea:focus {
            outline: none;
            border-color: #5c6bc0;
            box-shadow: 0 0 0 2px rgba(92, 107, 192, 0.2);
        }

        .tips {
            background-color: #e8f4f8;
            padding: 20px;
            border-radius: 8px;
            border-left: 5px solid #4CAF50;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .tips h3 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 1.3em;
        }

        .tips pre {
            font-size: 1.1em;
            line-height: 1.6;
            white-space: pre-wrap;
            margin: 10px 0;
        }

        .speech-input {
            margin: 20px 0;
        }

        /* å…±é€šãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .btn {
            background-color: #5c6bc0;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s, opacity 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .btn:hover {
            background-color: #3f51b5;
        }

        .btn:disabled {
            background-color: #9e9e9e;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .controls {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .control-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 15px;
        }

        .control-group label {
            min-width: 60px;
            margin-bottom: 0;
        }

        .control-group input[type="range"] {
            flex: 1;
        }

        .sample-answer {
            background-color: #fff3e0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            display: none; /* åˆæœŸã¯éè¡¨ç¤º */
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .prompt-section {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }

        .prompt-section h3 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 1.2em;
            margin-bottom: 15px;
        }

        .prompt-section pre {
            background-color: #fff;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
            white-space: pre-wrap;
            margin-bottom: 15px;
            font-family: 'Noto Sans JP', 'Hiragino Sans', 'Meiryo', monospace;
            overflow-x: auto; /* æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œ */
        }

        .utility-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .guidance-controls {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px dashed #ccc;
        }

        .speed-control-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .speed-control-group label {
            margin-bottom: 0;
        }

        /* ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥é¢¨ï¼‰ */
        .custom-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            z-index: 1000;
        }

        .custom-message.show {
            opacity: 1;
        }

        .error-message {
            color: #d32f2f; /* èµ¤è‰² */
            background-color: #ffebee;
            border: 1px solid #ef9a9a;
            padding: 10px;
            border-radius: 6px;
            margin-top: 15px;
            display: none; /* åˆæœŸã¯éè¡¨ç¤º */
        }


        @media (max-width: 840px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 15px;
            }
            .btn {
                width: 100%;
                margin-right: 0;
            }
            .button-group, .utility-buttons {
                flex-direction: column;
            }
            .control-group {
                flex-direction: column;
                align-items: stretch;
            }
            .control-group label {
                width: auto;
                min-width: unset;
            }
            .prompt-section pre {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">é¢æ¥ç·´ç¿’ãƒ—ãƒ­ã‚°ãƒ©ãƒ </div>
        
        <label for="question-select">è³ªå•ã‚’é¸ã‚“ã§ãã ã•ã„:</label>
        <select id="question-select">
            <option value="1">1. è‡ªå·±ç´¹ä»‹ã‚’ãŠé¡˜ã„ã—ã¾ã™</option>
            <option value="11">1-2. å°±è·æ´»å‹•ã¯ã€ã©ã®ã‚ˆã†ã«ãŠã“ãªã£ã¦ãã¾ã—ãŸã‹</option>
            <option value="2">2. å¿—æœ›å‹•æ©Ÿã‚’æ•™ãˆã¦ãã ã•ã„</option>
            <option value="3">3. å­¦ç”Ÿæ™‚ä»£ã«åŠ›ã‚’å…¥ã‚ŒãŸã“ã¨ã¯ä½•ã§ã™ã‹</option>
            <option value="4">4. ã‚ãªãŸã®é•·æ‰€ã¨çŸ­æ‰€ã‚’æ•™ãˆã¦ãã ã•ã„</option>
            <option value="5">5. å…¥ç¤¾å¾Œã«ã‚„ã‚ŠãŸã„ä»•äº‹ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„</option>
            <option value="6">6. 5å¹´å¾Œã€10å¹´å¾Œã®è‡ªåˆ†ã¯ã©ã†ãªã£ã¦ã„ãŸã„ã§ã™ã‹</option>
            <option value="7">7. è‡ªå·±PRã‚’ã—ã¦ãã ã•ã„ã€‚</option>
            <option value="8">8. ä»–ç¤¾ã®é¸è€ƒçŠ¶æ³ã‚’æ•™ãˆã¦ãã ã•ã„</option>
            <option value="9">9. å›°é›£ãªçµŒé¨“ã¨ãã®å…‹æœæ–¹æ³•ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„</option>
            <option value="10">10. æœ€å¾Œã«è³ªå•ã¯ã‚ã‚Šã¾ã™ã‹</option>
        </select>

        <div class="tips" id="answer-tips">
            <!-- ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯JavaScriptã§æŒ¿å…¥ -->
        </div>

        <button id="show-answer-btn" class="btn">æ¨¡ç¯„å›ç­”ã‚’è¡¨ç¤º/éè¡¨ç¤º</button>
        <div id="sample-answer" class="sample-answer"></div>

        <div class="speech-input">
            <label for="response-text">è‡ªåˆ†ã®å›ç­”ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆéŸ³å£°å…¥åŠ›å¯èƒ½ï¼‰:</label>
            <textarea id="response-text" rows="6"></textarea>
            <div id="speech-error-message" class="error-message"></div>
            <div class="button-group">
                <button id="start-speech-recognition" class="btn">éŸ³å£°å…¥åŠ›é–‹å§‹</button>
                <button id="stop-speech-recognition" class="btn" disabled>éŸ³å£°å…¥åŠ›åœæ­¢</button>
            </div>
            <div class="button-group">
                <button id="start-playback" class="btn">å›ç­”ã‚’èª­ã¿ä¸Šã’</button>
                <button id="stop-playback" class="btn" disabled>èª­ã¿ä¸Šã’åœæ­¢</button>
            </div>
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="speed-control">é€Ÿåº¦:</label>
                <input type="range" id="speed-control" min="0.5" max="2" step="0.1" value="1">
                <span id="speed-value">1.0x</span>
            </div>
            <div class="control-group">
                <label for="volume-control">éŸ³é‡:</label>
                <input type="range" id="volume-control" min="0" max="1" step="0.1" value="1">
                <span id="volume-value">100%</span>
            </div>
        </div>

        <div class="utility-buttons">
            <button class="btn" id="download-answers">å›ç­”ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
            <button class="btn" id="create-prompt">AIæ·»å‰Šç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆ</button>
            <button class="btn" id="copy-prompt">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼</button>
        </div>

        <div class="prompt-section" style="display: none;">
            <h3>AIæ·»å‰Šç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</h3>
            <pre id="prompt-output"></pre>
        </div>

        <!-- ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div id="custom-message" class="custom-message"></div>
    </div>

    <script>
        // å›ç­”ã®ãƒã‚¤ãƒ³ãƒˆã¨æ¨¡ç¯„å›ç­”ã®ãƒ‡ãƒ¼ã‚¿
        const answerTips = {
            1: {
                tips: "ãƒ»ç°¡æ½”ã«1åˆ†ç¨‹åº¦ã§è©±ã™\nãƒ»å­¦æ­´ã€è·æ­´ã€ç‰¹æŠ€ã€è¶£å‘³ãªã©ã‚’å«ã‚ã‚‹\nãƒ»å£°ã®å¤§ãã•ã‚„ã‚¢ã‚¤ã‚³ãƒ³ã‚¿ã‚¯ãƒˆã«æ³¨æ„\nãƒ»æœ€å¾Œã«æ„æ°—è¾¼ã¿ã‚’ä¼ãˆã‚‹",
                sample: "ã¯ã„ã€ç§ã®è‡ªå·±ç´¹ä»‹ã‚’ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚â—‹â—‹å¤§å­¦â–³â–³å­¦éƒ¨ã®â—‡â—‡ã¨ç”³ã—ã¾ã™ã€‚å¤§å­¦ã§ã¯æƒ…å ±å·¥å­¦ã‚’å°‚æ”»ã—ã€ç‰¹ã«AIã¨æ©Ÿæ¢°å­¦ç¿’ã«ã¤ã„ã¦ç ”ç©¶ã—ã¦ã¾ã„ã‚Šã¾ã—ãŸã€‚å­¦ç”Ÿæ™‚ä»£ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ç ”ç©¶ä¼šã«æ‰€å±ã—ã€ãƒãƒ¼ãƒ ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«å–ã‚Šçµ„ã‚“ã çµŒé¨“ãŒã‚ã‚Šã¾ã™ã€‚è¶£å‘³ã¯èª­æ›¸ã¨æ°´æ³³ã§ã€ç‰¹ã«æŠ€è¡“æ›¸ã‚’èª­ã‚€ã“ã¨ã§å¸¸ã«æ–°ã—ã„çŸ¥è­˜ã®ç¿’å¾—ã‚’å¿ƒãŒã‘ã¦ã„ã¾ã™ã€‚å¾¡ç¤¾ã§ã¯ã€ã“ã‚Œã¾ã§ã®çµŒé¨“ã‚’æ´»ã‹ã—ãªãŒã‚‰ã€ã•ã‚‰ãªã‚‹æˆé•·ã‚’ç›®æŒ‡ã—ã¦ç²¾ä¸€æ¯é ‘å¼µã‚ŠãŸã„ã¨è€ƒãˆã¦ãŠã‚Šã¾ã™ã€‚ã©ã†ãã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚"
            },
            11: {
                tips: "ãƒ»ã„ã¤ã”ã‚ã‹ã‚‰å°±è·æ´»å‹•ã‚’æœ¬æ ¼åŒ–ã•ã›ãŸã‹ç°¡å˜ã«è¿°ã¹ã‚‹\nãƒ»å­¦å†…åˆåŒèª¬æ˜ä¼šã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚·ãƒƒãƒ—ã¸ã®å‚åŠ ã«ã¤ã„ã¦è¿°ã¹ã‚‹\nãƒ»ãã®ä»–ã®å°±è·æ´»å‹•ã‚¤ãƒ™ãƒ³ãƒˆã‚„é¢æ¥çµŒé¨“ã«è¨€åŠã™ã‚‹ã€‚\nãƒ»æ´»å‹•ã‚’é€šã˜ã¦å­¦ã‚“ã ã“ã¨ã‚„æˆé•·ã—ãŸç‚¹ã‚’å¼·èª¿ã™ã‚‹",
                sample: "ã¯ã„ã€ç§ã®å°±è·æ´»å‹•ã¸ã®å–ã‚Šçµ„ã¿ã«ã¤ã„ã¦ãŠè©±ã—ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚ã¾ãšã€å¤§å­¦3å¹´ç”Ÿã®å¤é ƒã‹ã‚‰å°±è·æ´»å‹•ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã•ã›ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚·ãƒƒãƒ—ã‚„ãƒ¯ãƒ³ãƒ‡ãƒ¼ã§é–‹å‚¬ã•ã‚ŒãŸã‚ªãƒ¼ãƒ—ãƒ³ã‚«ãƒ³ãƒ‘ãƒ‹ãƒ¼ç­‰ã«å‚åŠ ã—ã¾ã—ãŸã€‚ãã“ã§æ§˜ã€…ãªæ¥­ç•Œã‚’çŸ¥ã‚Šã€ãã®ä¸­ã§ã€ã€Œä»Šã¾ã§ã¯ã€ä½•æ°—ãªãã¿ã¦ã„ãŸä¸–ã®ä¸­ã®ä»•äº‹ã®ä¸€ã¤ä¸€ã¤ãŒé‡è¦ã ã¨èªè­˜ã—ã¾ã—ãŸã€ã€‚ãã†ã—ã¦ã€æœ€æ–°ã®æŠ€è¡“å‹•å‘ã‚„æ±‚ã‚ã‚‰ã‚Œã‚‹äººæåƒã«ã¤ã„ã¦ç†è§£ã‚’æ·±ã‚ã¾ã—ãŸã€‚ã€ã“ã“ã‹ã‚‰ã¯ã€äº‹ä¾‹2ã¨ã—ã¦ã€å¿œç”¨ï¼‰å¤å­£ã¨æ˜¥å­£ã«2å›ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚·ãƒƒãƒ—ã«å‚åŠ ã—ã¾ã—ãŸã€‚1å›ç›®ã¯å¤§æ‰‹ITä¼æ¥­ã§2é€±é–“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å®Ÿç¿’ã€2å›ç›®ã¯ãƒ™ãƒ³ãƒãƒ£ãƒ¼ä¼æ¥­ã§1ãƒ¶æœˆé–“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ ã‚’çµŒé¨“ã—ã€å®Ÿéš›ã®æ¥­å‹™ã®æµã‚Œã‚„è·å ´ã®é›°å›²æ°—ã‚’è‚Œã§æ„Ÿã˜ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ã•ã‚‰ã«ã€å°±è·ãƒ•ã‚§ã‚¢ã«ã‚‚å‚åŠ ã—ã€ã‚ˆã‚Šå¤šãã®ä¼æ¥­æƒ…å ±ã‚’åé›†ã—ã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã®æ´»å‹•ã‚’é€šã˜ã¦ã€æ¥­ç•Œã¸ã®ç†è§£ãŒæ·±ã¾ã‚‹ã¨ã¨ã‚‚ã«ã€è‡ªåˆ†ã®å¿—æœ›ã™ã‚‹è·ç¨®ãŒã‚ˆã‚Šæ˜ç¢ºã«ãªã‚Šã¾ã—ãŸã€‚ä»Šå¾Œã‚‚ç©æ¥µçš„ã«æ´»å‹•ã‚’ç¶šã‘ã€è‡ªåˆ†ã«æœ€é©ãªä¼æ¥­ã‚’è¦‹ã¤ã‘ãŸã„ã¨è€ƒãˆã¦ãŠã‚Šã¾ã™ã€‚ã€‘"
            },
            2: {
                tips: "ãƒ»ä¼æ¥­ç ”ç©¶ã«åŸºã¥ã„ãŸå…·ä½“çš„ãªç†ç”±ã‚’è¿°ã¹ã‚‹\nãƒ»ä¼æ¥­ã®ç†å¿µã‚„ä¾¡å€¤è¦³ã¨ã®å…±æ„Ÿã‚’ç¤ºã™\nãƒ»è‡ªèº«ã®ã‚¹ã‚­ãƒ«ã‚„çµŒé¨“ãŒæ´»ã‹ã›ã‚‹ç‚¹ã‚’å¼·èª¿\nãƒ»å°†æ¥ã®ãƒ“ã‚¸ãƒ§ãƒ³ã‚‚å«ã‚ã‚‹",
                sample: "ç§ãŒå¾¡ç¤¾ã‚’å¿—æœ›ã—ãŸç†ç”±ã¯ã€ä¸»ã«3ã¤ã‚ã‚Šã¾ã™ã€‚1ã¤ç›®ã¯ã€å¾¡ç¤¾ã®ã€ŒæŠ€è¡“é©æ–°ã‚’é€šã˜ãŸç¤¾ä¼šè²¢çŒ®ã€ã¨ã„ã†ä¼æ¥­ç†å¿µã«å¼·ãå…±æ„Ÿã—ãŸã‹ã‚‰ã§ã™ã€‚2ã¤ç›®ã¯ã€å¾¡ç¤¾ãŒæ¨é€²ã—ã¦ã„ã‚‹â—‹â—‹äº‹æ¥­ãŒã€ç§ãŒå¤§å­¦ã§ç ”ç©¶ã—ã¦ããŸåˆ†é‡ã¨å¯†æ¥ã«é–¢é€£ã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚æœ€å¾Œã«ã€å¾¡ç¤¾ã®ç¤¾å“¡æ•™è‚²åˆ¶åº¦ã®å……å®Ÿåº¦ã§ã™ã€‚ç‰¹ã«è‹¥æ‰‹ç¤¾å“¡ã®è‚²æˆã«åŠ›ã‚’å…¥ã‚Œã¦ã„ã‚‹ç‚¹ã«é­…åŠ›ã‚’æ„Ÿã˜ã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã®ç†ç”±ã‹ã‚‰ã€ç§ã¯å¾¡ç¤¾ã§åƒãã“ã¨ã§ã€è‡ªå·±æˆé•·ã¨ç¤¾ä¼šè²¢çŒ®ã®ä¸¡æ–¹ã‚’å®Ÿç¾ã§ãã‚‹ã¨è€ƒãˆã¦ãŠã‚Šã¾ã™ã€‚"
            },
            3: {
                tips: "ãƒ»å…·ä½“çš„ãªã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚’ç”¨æ„ã™ã‚‹\nãƒ»ãã®çµŒé¨“ã§å¾—ã‚‰ã‚ŒãŸæˆæœã‚„å­¦ã³ã‚’æ˜ç¢ºã«\nãƒ»ä»•äº‹ã¨ã®é–¢é€£æ€§ã‚’æ„è­˜ã™ã‚‹\nãƒ»æ•°å€¤åŒ–ã§ãã‚‹å®Ÿç¸¾ãŒã‚ã‚Œã°å«ã‚ã‚‹",
                sample: "å­¦ç”Ÿæ™‚ä»£ã«æœ€ã‚‚åŠ›ã‚’å…¥ã‚ŒãŸã®ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ç ”ç©¶ä¼šã§ã®æ´»å‹•ã§ã™ã€‚ç‰¹ã«å°è±¡ã«æ®‹ã£ã¦ã„ã‚‹ã®ã¯ã€3å¹´æ¬¡ã«å–ã‚Šçµ„ã‚“ã åœ°åŸŸã®é«˜é½¢è€…å‘ã‘è²·ã„ç‰©æ”¯æ´ã‚¢ãƒ—ãƒªã®é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚10åã®ãƒãƒ¼ãƒ ã®ãƒªãƒ¼ãƒ€ãƒ¼ã¨ã—ã¦ã€è¦ä»¶å®šç¾©ã‹ã‚‰å®Ÿè£…ã€ãƒ†ã‚¹ãƒˆã¾ã§ã‚’æ‹…å½“ã—ã€åŠå¹´ã‹ã‘ã¦å®Œæˆã•ã›ã¾ã—ãŸã€‚ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é€šã˜ã¦ã€ãƒãƒ¼ãƒ ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã®é›£ã—ã•ã¨é‡è¦æ€§ã‚’å­¦ã³ã€ã¾ãŸæŠ€è¡“é¢ã§ã‚‚å¤§ããæˆé•·ã§ãã¾ã—ãŸã€‚æœ€çµ‚çš„ã«ã“ã®ã‚¢ãƒ—ãƒªã¯åœ°åŸŸã®100åä»¥ä¸Šã®æ–¹ã€…ã«åˆ©ç”¨ã—ã¦ã„ãŸã ãã€å®Ÿéš›ã®ç¤¾ä¼šèª²é¡Œè§£æ±ºã«è²¢çŒ®ã§ããŸçµŒé¨“ã¯ã€ç§ã®å¤§ããªè‡ªä¿¡ã¨ãªã£ã¦ã„ã¾ã™ã€‚"
            },
            4: {
                tips: "ãƒ»é•·æ‰€ã¯å…·ä½“çš„ãªã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã¨å…±ã«èª¬æ˜\nãƒ»çŸ­æ‰€ã¯æ”¹å–„ã¸ã®å–ã‚Šçµ„ã¿ã‚‚å«ã‚ã‚‹\nãƒ»è·å‹™ã«é–¢é€£ã™ã‚‹ç‰¹æ€§ã‚’é¸ã¶\nãƒ»èª å®Ÿã«ç­”ãˆã‚‹",
                sample: "ç§ã®é•·æ‰€ã¯ã€ç²˜ã‚Šå¼·ãç‰©äº‹ã«å–ã‚Šçµ„ã‚€å§¿å‹¢ã§ã™ã€‚ä¾‹ãˆã°ã€å¤§å­¦ã§ã®å’æ¥­ç ”ç©¶ã§ã¯ã€å®Ÿé¨“ãŒä½•åº¦ã‚‚å¤±æ•—ã—ã¾ã—ãŸãŒã€åŸå› ã‚’ä¸€ã¤ãšã¤æ¤œè¨¼ã—ã€æœ€çµ‚çš„ã«æˆåŠŸã«å°ãã“ã¨ãŒã§ãã¾ã—ãŸã€‚ä¸€æ–¹ã€çŸ­æ‰€ã¯å®Œç’§ã‚’æ±‚ã‚ã™ãã‚‹ã‚ã¾ã‚Šã€æ„æ€æ±ºå®šã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã—ã¾ã†ã“ã¨ã§ã™ã€‚ã“ã®ç‚¹ã«ã¤ã„ã¦ã¯ã€é‡è¦åº¦ã«å¿œã˜ã¦ç· åˆ‡ã‚’è¨­å®šã—ã€è¨ˆç”»çš„ã«é€²ã‚ã‚‹ã“ã¨ã§æ”¹å–„ã‚’å›³ã£ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ãƒãƒ¼ãƒ ã§ã®ä½œæ¥­ã®éš›ã¯ã€æ—©ã‚ã«ç›¸è«‡ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚ŠåŠ¹ç‡çš„ãªåˆ¤æ–­ãŒã§ãã‚‹ã‚ˆã†å¿ƒãŒã‘ã¦ã„ã¾ã™ã€‚"
            },
            5: {
                tips: "ãƒ»ä¼æ¥­ã®äº‹æ¥­å†…å®¹ã‚’è¸ã¾ãˆã¦å…·ä½“çš„ã«è©±ã™\nãƒ»è‡ªèº«ã®ã‚¹ã‚­ãƒ«ã‚„çµŒé¨“ãŒæ´»ã‹ã›ã‚‹åˆ†é‡ã«è¨€åŠ\nãƒ»æ„æ¬²ã¨æˆé•·ã¸ã®æœŸå¾…ã‚’ç¤ºã™\nãƒ»ç¾å®Ÿçš„ãªç›®æ¨™è¨­å®šã‚’å¿ƒãŒã‘ã‚‹",
                sample: "å…¥ç¤¾å¾Œã¯ã€ã¾ãšå¾¡ç¤¾ã®åŸºå¹¹äº‹æ¥­ã§ã‚ã‚‹â—‹â—‹ã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºãƒãƒ¼ãƒ ã§ã€åŸºç¤ã‹ã‚‰å®Ÿè·µçš„ãªã‚¹ã‚­ãƒ«ã‚’ç¿’å¾—ã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ç§ã¯å¤§å­¦ã§Javaã¨Pythonã‚’ä¸­å¿ƒã«å­¦ã‚“ã§ããŸã®ã§ã€ãã®çŸ¥è­˜ã‚’æ´»ã‹ã—ãªãŒã‚‰ã€å®Ÿå‹™ã§å¿…è¦ã¨ãªã‚‹æŠ€è¡“ã‚’ç€å®Ÿã«èº«ã«ã¤ã‘ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚ç‰¹ã«ã€å¾¡ç¤¾ãŒåŠ›ã‚’å…¥ã‚Œã¦ã„ã‚‹AIæŠ€è¡“ã®å®Ÿè£…ã«æºã‚ã‚Šã€ã‚ˆã‚ŠåŠ¹ç‡çš„ãªã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã«è²¢çŒ®ã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ã¾ãŸã€å°†æ¥çš„ã«ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ¼ãƒ€ãƒ¼ã¨ã—ã¦ã€ãƒãƒ¼ãƒ ã‚’ç‰½å¼•ã§ãã‚‹äººæã«æˆé•·ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚"
            },
            6: {
                tips: "ãƒ»å…·ä½“çš„ã‹ã¤ç¾å®Ÿçš„ãªç›®æ¨™ã‚’è¨­å®š\nãƒ»ä¼šç¤¾ã®å°†æ¥æ€§ã¨è‡ªèº«ã®ã‚­ãƒ£ãƒªã‚¢ãƒ—ãƒ©ãƒ³ã‚’çµã³ã¤ã‘ã‚‹\nãƒ»æ®µéšçš„ãªæˆé•·ãƒ—ãƒ©ãƒ³ã‚’ç¤ºã™\nãƒ»ç†±æ„ã¨æ„æ¬²ã‚’ä¼ãˆã‚‹",
                sample: "5å¹´å¾Œã«ã¯ã€ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã®ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆã¨ã—ã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­æ ¸ã‚’æ‹…ãˆã‚‹äººæã«ãªã£ã¦ã„ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ç‰¹ã«ã€å¾¡ç¤¾ãŒæ³¨åŠ›ã—ã¦ã„ã‚‹â—‹â—‹åˆ†é‡ã«ãŠã„ã¦ã€æŠ€è¡“åŠ›ã¨çµŒé¨“ã‚’ç©ã¿ã€å¾Œè¼©ã®æŒ‡å°ã‚‚ã§ãã‚‹ç«‹å ´ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚10å¹´å¾Œã«ã¯ã€ãã®çµŒé¨“ã‚’æ´»ã‹ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨ã—ã¦ã€å¤§è¦æ¨¡ãªé–‹ç™ºæ¡ˆä»¶ã‚’ä»»ã›ã¦ã„ãŸã ã‘ã‚‹ã‚ˆã†ã€æ—¥ã€…ç ”é‘½ã‚’ç©ã‚“ã§ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚ã¾ãŸã€ã‚°ãƒ­ãƒ¼ãƒãƒ«æ¡ˆä»¶ã«ã‚‚æºã‚ã‚ŠãŸã„ã¨è€ƒãˆã¦ãŠã‚Šã€ãã®ãŸã‚ã«ç¤¾å†…ã®èªå­¦ç ”ä¿®ãªã©ã‚‚ç©æ¥µçš„ã«æ´»ç”¨ã—ã¦ã„ããŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚"
            },
            7: {
                tips: "ãƒ»å…·ä½“çš„ãªå¼·ã¿ã‚’ä¸€è¨€ã§ç°¡æ½”ã«è©±ã™ã€‚\nãƒ»æ•°å€¤ã‚„æˆæœã‚’ç”¨ã„ã¦å®¢è¦³çš„ã«ç¤ºã™\nãƒ»ãã®çµŒé¨“ã‹ã‚‰å¾—ãŸå­¦ã³ã‚„æˆé•·ã‚’æ˜ç¢ºã«è¿°ã¹ã‚‹\nãƒ»ä¼æ¥­ã®ãƒ‹ãƒ¼ã‚ºã¨ã®é–¢é€£æ€§ã‚’ç¤ºã™",
                sample: "ç§ã®æœ€å¤§ã®å¼·ã¿ã¯ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã§ã™ã€‚ç‰¹ã«ã€å¤§å­¦3å¹´æ¬¡ã«å‚åŠ ã—ãŸå›½éš›ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢æ´»å‹•ã§ã®çµŒé¨“ãŒã€ã“ã®èƒ½åŠ›ã‚’å¤§ããå‘ä¸Šã•ã›ã¾ã—ãŸã€‚6ãƒ¶æœˆé–“ã€5ã‚«å›½ã‹ã‚‰ã®20åã®å­¦ç”Ÿã¨å…±ã«æ´»å‹•ã—ã€è¨€èªã‚„æ–‡åŒ–ã®å£ã‚’ä¹—ã‚Šè¶Šãˆã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æˆåŠŸã«å°ãã¾ã—ãŸã€‚å…·ä½“çš„ã«ã¯ã€åœ°åŸŸã®ç’°å¢ƒä¿è­·æ´»å‹•ã«ãŠã„ã¦ã€ç§ãŒãƒªãƒ¼ãƒ€ãƒ¼ã¨ãªã‚Šã€ãƒ¡ãƒ³ãƒãƒ¼é–“ã®æ„è¦‹ã®ç›¸é•ã‚’èª¿æ•´ã—ã€åœ°åŸŸä½æ°‘ã¨ã®å¯¾è©±ã‚’é‡ã­ãŸçµæœã€æ¤æ¨¹æœ¬æ•°ã‚’å½“åˆç›®æ¨™ã®150%ã§ã‚ã‚‹3000æœ¬ã¾ã§å¢—ã‚„ã™ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ã“ã®çµŒé¨“ã‚’é€šã˜ã¦ã€å¤šæ§˜ãªèƒŒæ™¯ã‚’æŒã¤äººã€…ã¨åŠ¹æœçš„ã«ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–ã‚‹èƒ½åŠ›ã¨ã€ç›®æ¨™é”æˆã«å‘ã‘ã¦ç²˜ã‚Šå¼·ãå–ã‚Šçµ„ã‚€å§¿å‹¢ã‚’èº«ã«ã¤ã‘ã¾ã—ãŸã€‚å¾¡ç¤¾ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªäº‹æ¥­å±•é–‹ã«ãŠã„ã¦ã€ã“ã®çµŒé¨“ã¨èƒ½åŠ›ã‚’æ´»ã‹ã—ã€å›½éš›çš„ãªãƒãƒ¼ãƒ ã®ä¸­ã§å††æ»‘ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å›³ã‚ŠãªãŒã‚‰ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æˆåŠŸã«å°ãã“ã¨ãŒã§ãã‚‹ã¨ç¢ºä¿¡ã—ã¦ã„ã¾ã™ã€‚"
            },
            8: {
                tips: "ãƒ»èª å®Ÿã«ç¾çŠ¶ã‚’èª¬æ˜\nãƒ»å¿—æœ›åº¦ã®é«˜ã•ã‚’ä¼ãˆã‚‹\nãƒ»å…·ä½“çš„ãªæ•°å€¤ã¯æ§ãˆã‚ã«\nãƒ»ãƒã‚¸ãƒ†ã‚£ãƒ–ãªæ…‹åº¦ã§å›ç­”",
                sample: "ç¾åœ¨ã€æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ æ¥­ç•Œã‚’ä¸­å¿ƒã«æ•°ç¤¾ã«å¿œå‹Ÿã—ã¦ãŠã‚Šã€é¸è€ƒã‚’é€²ã‚ã¦ã„ãŸã ã„ã¦ã„ã¾ã™ã€‚ãŸã ã—ã€å¾¡ç¤¾ã¯ç§ã®ç¬¬ä¸€å¿—æœ›ã§ã‚ã‚Šã€å¾¡ç¤¾ã§ã®ä»•äº‹ã‚’é€šã˜ã¦ã€ã‚­ãƒ£ãƒªã‚¢ã‚’ç¯‰ã„ã¦ã„ããŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ç‰¹ã«å¾¡ç¤¾ã®â—‹â—‹äº‹æ¥­ã«ã¯å¤§å¤‰èˆˆå‘³ãŒã‚ã‚Šã€ã“ã®åˆ†é‡ã§ç²¾ä¸€æ¯è²¢çŒ®ã—ãŸã„ã¨ã„ã†æ€ã„ãŒå¼·ãã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€å¾¡ç¤¾ã®é¸è€ƒã«æœ€ã‚‚åŠ›ã‚’å…¥ã‚Œã¦è‡¨ã‚“ã§ãŠã‚Šã¾ã™ã€‚"
            },
            9: {
                tips: "ãƒ»å…·ä½“çš„ãªã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚’é¸ã¶\nãƒ»å•é¡Œè§£æ±ºã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’èª¬æ˜\nãƒ»å­¦ã‚“ã æ•™è¨“ã‚’å¼·èª¿\nãƒ»å‰å‘ããªå§¿å‹¢ã‚’ç¤ºã™",
                sample: "æœ€ã‚‚å›°é›£ã ã£ãŸã®ã¯ã€å¤§å­¦3å¹´æ¬¡ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã§ã®çµŒé¨“ã§ã™ã€‚5äººãƒãƒ¼ãƒ ã®ãƒªãƒ¼ãƒ€ãƒ¼ã¨ã—ã¦å‚åŠ ã—ã¾ã—ãŸãŒã€ãƒ¡ãƒ³ãƒãƒ¼é–“ã§ã®æŠ€è¡“åŠ›ã®å·®ã‚„ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¶³ã«ã‚ˆã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒäºˆå®šé€šã‚Šé€²ã¾ãªã„çŠ¶æ³ã«ç›´é¢ã—ã¾ã—ãŸã€‚ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã€ã¾ãšãƒãƒ¼ãƒ å†…ã§é€±2å›ã®å®šä¾‹ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¨­å®šã—ã€é€²æ—ã®å…±æœ‰ã¨èª²é¡Œã®æ—©æœŸç™ºè¦‹ã«åŠªã‚ã¾ã—ãŸã€‚ã¾ãŸã€æŠ€è¡“åŠ›ã®å·®ã‚’è£œã†ãŸã‚ã€å¾—æ„åˆ†é‡ã‚’æ´»ã‹ã—ãŸå½¹å‰²åˆ†æ‹…ã¨ã€ç›¸äº’å­¦ç¿’ã®æ™‚é–“ã‚’è¨­ã‘ã¾ã—ãŸã€‚çµæœã¨ã—ã¦ã€ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒæ”¹å–„ã•ã‚Œã€ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã§ã¯å…¥è³ã‚’æœãŸã™ã“ã¨ãŒã§ãã¾ã—ãŸã€‚"
            },
            10: {
                tips: "ãƒ»äº‹å‰ã«ä¼æ¥­ç ”ç©¶ã‚’è¡Œã„ã€è³ªå•ã‚’æº–å‚™\nãƒ»ç©æ¥µæ€§ã¨æ„æ¬²ã‚’ç¤ºã™è³ªå•ã‚’ã™ã‚‹\nãƒ»å…·ä½“çš„ã§å»ºè¨­çš„ãªè³ªå•ã‚’å¿ƒãŒã‘ã‚‹\nãƒ»ç›¸æ‰‹ã®æ™‚é–“ã‚’è€ƒæ…®ã™ã‚‹",
                sample: "ã¯ã„ã€2ç‚¹è³ªå•ã•ã›ã¦ã„ãŸã ããŸã„ã¨æ€ã„ã¾ã™ã€‚1ç‚¹ç›®ã¯ã€å…¥ç¤¾å¾Œã®ç ”ä¿®åˆ¶åº¦ã«ã¤ã„ã¦ã§ã™ã€‚ç‰¹ã«æŠ€è¡“ç ”ä¿®ã®å…·ä½“çš„ãªå†…å®¹ã‚„æœŸé–“ã«ã¤ã„ã¦ã€è©³ã—ããŠèã‹ã›ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚2ç‚¹ç›®ã¯ã€å¾¡ç¤¾ãŒä»Šå¾Œæ³¨åŠ›ã—ã¦ã„ããŸã„äº‹æ¥­åˆ†é‡ã‚„æŠ€è¡“ã«ã¤ã„ã¦ã§ã™ã€‚ä¸­é•·æœŸçš„ãªå±•æœ›ã‚’ãŠä¼ºã„ã§ãã‚Œã°ã¨æ€ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ç‚¹ã«ã¤ã„ã¦ã€ãŠè©±ã—ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚"
            }
        };

        // DOMè¦ç´ ã®å–å¾—
        const questionSelect = document.getElementById('question-select');
        const answerTipsElement = document.getElementById('answer-tips');
        const showAnswerBtn = document.getElementById('show-answer-btn');
        const sampleAnswerElement = document.getElementById('sample-answer');
        const responseText = document.getElementById('response-text');
        const speedControl = document.getElementById('speed-control');
        const volumeControl = document.getElementById('volume-control');
        const speedValue = document.getElementById('speed-value');
        const volumeValue = document.getElementById('volume-value');
        const startPlaybackBtn = document.getElementById('start-playback');
        const stopPlaybackBtn = document.getElementById('stop-playback');
        const startSpeechRecognitionBtn = document.getElementById('start-speech-recognition');
        const stopSpeechRecognitionBtn = document.getElementById('stop-speech-recognition');
        const downloadAnswersBtn = document.getElementById('download-answers');
        const createPromptBtn = document.getElementById('create-prompt');
        const copyPromptBtn = document.getElementById('copy-prompt');
        const promptSection = document.querySelector('.prompt-section');
        const promptOutput = document.getElementById('prompt-output');
        const customMessageElement = document.getElementById('custom-message');
        const speechErrorMessage = document.getElementById('speech-error-message');

        // éŸ³å£°åˆæˆã®è¨­å®š
        let speechSynthesis = window.speechSynthesis;
        let speechUtterance = null;
        let guidanceUtterance = null; // ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ç”¨ã®Utterance

        // éŸ³å£°èªè­˜ã®è¨­å®š
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition = null; // recognitionã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯å¾Œã§åˆæœŸåŒ–
        let currentRecognitionText = ''; // ç¢ºå®šã—ãŸéŸ³å£°èªè­˜çµæœã‚’ä¿æŒã™ã‚‹å¤‰æ•°

        // ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºé–¢æ•°
        function showCustomMessage(message, type = 'success', duration = 3000) {
            customMessageElement.textContent = message;
            customMessageElement.className = 'custom-message show'; // ã‚¯ãƒ©ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦å†è¡¨ç¤º

            // ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦èƒŒæ™¯è‰²ã‚’å¤‰æ›´ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
            if (type === 'error') {
                customMessageElement.style.backgroundColor = '#d32f2f'; // èµ¤
            } else {
                customMessageElement.style.backgroundColor = '#4CAF50'; // ç·‘
            }

            setTimeout(() => {
                customMessageElement.classList.remove('show');
            }, duration);
        }

        // ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹æ©Ÿèƒ½ã®DOMè¦ç´ ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’åˆæœŸåŒ–ã™ã‚‹é–¢æ•°
        function setupGuidanceControls(questionData) {
            // æ—¢å­˜ã®ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãŒã‚ã‚Œã°å‰Šé™¤ï¼ˆé‡è¤‡é˜²æ­¢ï¼‰
            const existingGuidanceControls = answerTipsElement.querySelector('.guidance-controls');
            if (existingGuidanceControls) {
                existingGuidanceControls.remove();
            }

            answerTipsElement.innerHTML = `
                <h3>ç­”ãˆæ–¹ã®ãƒã‚¤ãƒ³ãƒˆ:</h3>
                <pre>${questionData.tips}</pre>
                <div class="guidance-controls">
                    <button id="start-guidance" class="btn">ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹é–‹å§‹</button>
                    <button id="stop-guidance" class="btn" disabled>ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹åœæ­¢</button>
                    <div class="speed-control-group">
                        <label for="guidance-speed">èª­ã¿ä¸Šã’é€Ÿåº¦:</label>
                        <input type="range" id="guidance-speed" min="0.5" max="2" step="0.1" value="1">
                        <span id="guidance-speed-value">1.0x</span>
                    </div>
                </div>
            `;

            const startGuidanceBtn = document.getElementById('start-guidance');
            const stopGuidanceBtn = document.getElementById('stop-guidance');
            const guidanceSpeed = document.getElementById('guidance-speed');
            const guidanceSpeedValue = document.getElementById('guidance-speed-value');

            // é€Ÿåº¦ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’æ¯å›å†è¨­å®š
            guidanceSpeed.addEventListener('input', () => {
                const speed = guidanceSpeed.value;
                guidanceSpeedValue.textContent = `${speed}x`;
                if (guidanceUtterance) {
                    guidanceUtterance.rate = speed;
                }
            });

            // ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹é–‹å§‹ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            startGuidanceBtn.addEventListener('click', () => {
                if (speechSynthesis.speaking) {
                    speechSynthesis.cancel();
                }

                guidanceUtterance = new SpeechSynthesisUtterance(questionData.tips);
                guidanceUtterance.lang = 'ja-JP';
                guidanceUtterance.rate = guidanceSpeed.value;

                guidanceUtterance.onend = () => {
                    startGuidanceBtn.disabled = false;
                    stopGuidanceBtn.disabled = true;
                };

                speechSynthesis.speak(guidanceUtterance);
                startGuidanceBtn.disabled = true;
                stopGuidanceBtn.disabled = false;
            });

            // ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹åœæ­¢ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            stopGuidanceBtn.addEventListener('click', () => {
                if (speechSynthesis.speaking) {
                    speechSynthesis.cancel();
                    startGuidanceBtn.disabled = false;
                    stopGuidanceBtn.disabled = true;
                }
            });
        }


        // è³ªå•é¸æŠæ™‚ã®å‡¦ç†ã‚’ã¾ã¨ã‚ãŸé–¢æ•°
        function updateQuestionDisplay() {
            const selectedQuestion = questionSelect.value;
            const questionData = answerTips[selectedQuestion];

            setupGuidanceControls(questionData); // ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

            sampleAnswerElement.textContent = questionData.sample;
            sampleAnswerElement.style.display = 'none'; // å¸¸ã«éè¡¨ç¤ºã«æˆ»ã™
        }

        // åˆæœŸåŒ–å‡¦ç†
        window.onload = () => {
            // SpeechRecognition ã®åˆæœŸåŒ–
            if (SpeechRecognition) {
                recognition = new SpeechRecognition();
                recognition.lang = 'ja-JP';
                recognition.continuous = true;
                recognition.interimResults = true;

                recognition.onresult = (event) => {
                    let interimTranscript = '';
                    let finalTranscriptSegment = ''; // ä»Šå›ã®ã‚¤ãƒ™ãƒ³ãƒˆã§ç¢ºå®šã—ãŸéƒ¨åˆ†

                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        const transcript = event.results[i][0].transcript;
                        if (event.results[i].isFinal) {
                            finalTranscriptSegment += transcript; // ç¢ºå®šã—ãŸéƒ¨åˆ†ã‚’è¿½åŠ 
                        } else {
                            interimTranscript += transcript; // æœªç¢ºå®šéƒ¨åˆ†ã‚’è¿½åŠ 
                        }
                    }
                    // ç¢ºå®šã—ãŸéƒ¨åˆ†ã‚’ç´¯ç©ãƒ†ã‚­ã‚¹ãƒˆã«è¿½åŠ 
                    currentRecognitionText += finalTranscriptSegment;
                    // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã«ã¯ç¢ºå®šéƒ¨åˆ† + æœªç¢ºå®šéƒ¨åˆ†ã‚’è¡¨ç¤º
                    responseText.value = currentRecognitionText + interimTranscript;
                };

                recognition.onerror = (event) => {
                    console.error('éŸ³å£°èªè­˜ã‚¨ãƒ©ãƒ¼:', event.error);
                    speechErrorMessage.textContent = `éŸ³å£°èªè­˜ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${event.error}ã€‚ãƒã‚¤ã‚¯ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚`;
                    speechErrorMessage.style.display = 'block';
                    startSpeechRecognitionBtn.disabled = false;
                    stopSpeechRecognitionBtn.disabled = true;
                    responseText.readOnly = false; // ã‚¨ãƒ©ãƒ¼æ™‚ã¯å…¥åŠ›å¯èƒ½ã«æˆ»ã™
                };

                recognition.onend = () => {
                    startSpeechRecognitionBtn.disabled = false;
                    stopSpeechRecognitionBtn.disabled = true;
                    responseText.readOnly = false; // èªè­˜çµ‚äº†æ™‚ã¯å…¥åŠ›å¯èƒ½ã«æˆ»ã™
                };
            } else {
                startSpeechRecognitionBtn.disabled = true;
                stopSpeechRecognitionBtn.disabled = true;
                speechErrorMessage.textContent = 'ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°èªè­˜ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚';
                speechErrorMessage.style.display = 'block';
            }


            // åˆæœŸè¡¨ç¤ºæ™‚ã®è³ªå•ã¨ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
            questionSelect.value = '1';
            updateQuestionDisplay();

            // åˆæœŸãƒœã‚¿ãƒ³çŠ¶æ…‹è¨­å®š
            stopPlaybackBtn.disabled = true;
            stopSpeechRecognitionBtn.disabled = true;
        };

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
        questionSelect.addEventListener('change', updateQuestionDisplay);

        // æ¨¡ç¯„å›ç­”ã®è¡¨ç¤º/éè¡¨ç¤º
        showAnswerBtn.addEventListener('click', () => {
            sampleAnswerElement.style.display =
                sampleAnswerElement.style.display === 'none' ? 'block' : 'none';
        });

        // éŸ³å£°å…¥åŠ›ã®é–‹å§‹
        startSpeechRecognitionBtn.addEventListener('click', () => {
            if (recognition) {
                responseText.value = ''; // é–‹å§‹æ™‚ã«ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã‚’ã‚¯ãƒªã‚¢
                currentRecognitionText = ''; // â˜…ç¢ºå®šæ¸ˆã¿ãƒ†ã‚­ã‚¹ãƒˆã‚‚ãƒªã‚»ãƒƒãƒˆ
                speechErrorMessage.style.display = 'none'; // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤ºã«
                recognition.start();
                startSpeechRecognitionBtn.disabled = true;
                stopSpeechRecognitionBtn.disabled = false;
                responseText.readOnly = true; // éŸ³å£°å…¥åŠ›ä¸­ã¯ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã‚’èª­ã¿å–ã‚Šå°‚ç”¨ã«
            }
        });

        // éŸ³å£°å…¥åŠ›ã®åœæ­¢
        stopSpeechRecognitionBtn.addEventListener('click', () => {
            if (recognition) {
                recognition.stop();
                startSpeechRecognitionBtn.disabled = false;
                stopSpeechRecognitionBtn.disabled = true;
                responseText.readOnly = false; // éŸ³å£°å…¥åŠ›åœæ­¢æ™‚ã¯ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã‚’ç·¨é›†å¯èƒ½ã«
            }
        });

        // é€Ÿåº¦ã¨ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®åˆ¶å¾¡
        speedControl.addEventListener('input', () => {
            const speed = speedControl.value;
            speedValue.textContent = `${speed}x`;
            if (speechUtterance) {
                speechUtterance.rate = speed;
            }
        });

        volumeControl.addEventListener('input', () => {
            const volume = volumeControl.value;
            volumeValue.textContent = `${Math.round(volume * 100)}%`;
            if (speechUtterance) {
                speechUtterance.volume = volume;
            }
        });

        // å›ç­”ã®èª­ã¿ä¸Šã’é–‹å§‹
        startPlaybackBtn.addEventListener('click', () => {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
            }

            const text = responseText.value;
            if (text) {
                speechUtterance = new SpeechSynthesisUtterance(text);
                speechUtterance.lang = 'ja-JP';
                speechUtterance.rate = speedControl.value;
                speechUtterance.volume = volumeControl.value;

                speechUtterance.onend = () => {
                    startPlaybackBtn.disabled = false;
                    stopPlaybackBtn.disabled = true;
                };

                speechSynthesis.speak(speechUtterance);
                startPlaybackBtn.disabled = true;
                stopPlaybackBtn.disabled = false;
            }
        });

        // èª­ã¿ä¸Šã’åœæ­¢
        stopPlaybackBtn.addEventListener('click', () => {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
                startPlaybackBtn.disabled = false;
                stopPlaybackBtn.disabled = true;
            }
        });

        // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
        downloadAnswersBtn.addEventListener('click', () => {
            const answers = responseText.value;
            if (!answers.trim()) {
                showCustomMessage('ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å›ç­”ãŒã‚ã‚Šã¾ã›ã‚“ã€‚', 'error');
                return;
            }
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
            const blob = new Blob([answers], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `interview-answers-${timestamp}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showCustomMessage('å›ç­”ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸã€‚');
        });

        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆæ©Ÿèƒ½
        createPromptBtn.addEventListener('click', () => {
            const answers = responseText.value;
            const selectedQuestion = questionSelect.options[questionSelect.selectedIndex].text;
            let promptContent = 'é¢æ¥å›ç­”ã®æ·»å‰Šã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚\n\n';
            
            promptContent += 'è³ªå•ï¼š\n';
            promptContent += selectedQuestion + '\n\n';
            
            promptContent += 'ä»¥ä¸‹ã®ç‚¹ã«æ³¨ç›®ã—ã¦æ·»å‰Šã—ã¦ãã ã•ã„ï¼š\n';
            promptContent += '1. å›ç­”ã®è«–ç†æ€§ã¨æ§‹æˆ\n';
            promptContent += '2. å…·ä½“ä¾‹ã®é©åˆ‡ãªä½¿ç”¨\n';
            promptContent += '3. é¢æ¥å®˜ã¸ã®å°è±¡ï¼ˆç©æ¥µæ€§ã€èª å®Ÿã•ç­‰ï¼‰\n';
            promptContent += '4. è¨€è‘‰é£ã„ã¨ãƒ“ã‚¸ãƒã‚¹ãƒãƒŠãƒ¼\n';
            promptContent += '5. æ”¹å–„ç‚¹ã¨å…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹\n\n';

            // æ–°ã—ãè¿½åŠ ã™ã‚‹æŒ‡ç¤ºã‚’ä¿®æ­£
            promptContent += 'ã¾ãŸã€æ”¹å–„ã—ãŸå›ç­”ã‚’æ–‡ç« ã§ä½œæˆã—ã€ãã®å›ç­”ã®éª¨å­ã‚’ç®‡æ¡æ›¸ãã§ç¤ºã—ã¦ãã ã•ã„ã€‚å­¦ç”ŸãŒè©±ã—ã‚„ã™ã„ã‚ˆã†ã«ã€éª¨å­ã‚’å…ˆã«ç¤ºã—ã€ãã®å¾Œã§å®Œå…¨ãªå›ç­”ã®æ–‡ç« ã‚’è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚\n\n';


            promptContent += 'å›ç­”å†…å®¹ï¼š\n';
            promptContent += answers + '\n\n';

            promptContent += 'ä»¥ä¸‹ã®å½¢å¼ã§æ·»å‰Šã‚’ãŠé¡˜ã„ã—ã¾ã™ï¼š\n';
            promptContent += 'âœ… è‰¯ã„ç‚¹\n';
            promptContent += 'âŒ æ”¹å–„ç‚¹\n';
            promptContent += 'ğŸ’¡ å…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹\n';
            promptContent += 'ğŸ“ æ”¹å–„ã•ã‚ŒãŸå›ç­”ï¼ˆéª¨å­ä»˜ãï¼‰ï¼š\n'; // å½¢å¼ã®é …ç›®ã‚‚æ›´æ–°
            promptContent += 'éª¨å­ï¼š\n';
            promptContent += 'ãƒ»ï¼ˆç®‡æ¡æ›¸ãã®éª¨å­1ï¼‰\n';
            promptContent += 'ãƒ»ï¼ˆç®‡æ¡æ›¸ãã®éª¨å­2ï¼‰\n';
            promptContent += 'â€¦\n';
            promptContent += 'å®Œå…¨ãªå›ç­”ï¼š\n';
            promptContent += 'ï¼ˆã“ã“ã«æ”¹å–„ã•ã‚ŒãŸå®Œå…¨ãªå›ç­”ã®æ–‡ç« ã‚’è¨˜è¿°ï¼‰\n';


            promptOutput.textContent = promptContent;
            promptSection.style.display = 'block';
            showCustomMessage('AIæ·»å‰Šç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚');
        });

        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚³ãƒ”ãƒ¼æ©Ÿèƒ½
        copyPromptBtn.addEventListener('click', () => {
            const promptText = promptOutput.textContent;
            if (!promptText.trim()) {
                showCustomMessage('ã‚³ãƒ”ãƒ¼ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã€‚å…ˆã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚', 'error');
                return;
            }
            // navigator.clipboard.writeText() ã¯ iframe å†…ã§ã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶é™ãŒã‚ã‚‹å ´åˆãŒã‚ã‚‹ãŸã‚ã€
            // document.execCommand('copy') ã‚’ä½¿ç”¨ï¼ˆéæ¨å¥¨ã ãŒäº’æ›æ€§ã®ãŸã‚ï¼‰
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = promptText;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCustomMessage('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚');
                    // ã‚³ãƒ”ãƒ¼å¾Œã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä¸€æ™‚çš„ã«è¡¨ç¤ºã—ã€ãã®å¾Œéè¡¨ç¤ºã«ã™ã‚‹
                    setTimeout(() => {
                        promptSection.style.display = 'none';
                    }, 3000); // 3ç§’å¾Œã«éè¡¨ç¤º
                } else {
                    showCustomMessage('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'error');
                }
            } catch (err) {
                console.error('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                showCustomMessage('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'error');
            }
            document.body.removeChild(tempTextArea);
        });
    </script>
</body>
</html>
